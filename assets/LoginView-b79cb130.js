import{S as u}from"./sweetalert2-fb1ab54e.js";import{_ as v,H as b,r as n,o as _,c as p,d as e,b as t,w as V,n as f,f as w,e as x}from"./index-4d0c22ad.js";const{VITE_URL:L}={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_PATH:"j437437",BASE_URL:"/BirdLab/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},E={data(){return{user:{username:"",password:""},isLoading:!1}},methods:{login(){this.isLoading=!0;const i=`${L}v2/admin/signin`;this.$http.post(i,this.user).then(s=>{const{token:r,expired:l}=s.data;document.cookie=`hexToken=${r}; expires=${new Date(l)}`,this.isLoading=!1,u.fire({icon:"success",title:"登入成功",confirmButtonColor:"#31523f"}),this.$router.push("/admin")}).catch(s=>{this.isLoading=!1,u.fire({icon:"error",title:s.response.data.message,text:"請輸入正確的帳號密碼"})})}},components:{ErrorMessage:b}},k={class:"container py-5",style:{"min-height":"80vh"}},y={class:"row justify-content-center"},S={class:"col-md-6"},B=e("h3",null,"登入畫面",-1),T=e("hr",null,null,-1),C={class:"form-floating mb-3"},R=e("label",{for:"username"},"Email address",-1),U={class:"form-floating"},D=e("label",{for:"password"},"Password",-1),N=["disabled"],I={key:0,class:"fas fa-spinner fa-pulse"};function P(i,s,r,l,o,h){const d=n("v-field"),c=n("error-message"),g=n("v-form");return _(),p("div",k,[e("div",y,[e("div",S,[B,T,t(g,{ref:"form",onSubmit:h.login},{default:V(({errors:m})=>[e("div",C,[t(d,{id:"email",name:"email",type:"email",class:f(["form-control",{"is-invalid":m.email}]),placeholder:"name@example.com",rules:"email|required",modelValue:o.user.username,"onUpdate:modelValue":s[0]||(s[0]=a=>o.user.username=a)},null,8,["class","modelValue"]),R,t(c,{name:"email",class:"invalid-feedback"})]),e("div",U,[t(d,{id:"password",name:"密碼",type:"password",class:f(["form-control",{"is-invalid":m.密碼}]),placeholder:"請輸入密碼",rules:"required",modelValue:o.user.password,"onUpdate:modelValue":s[1]||(s[1]=a=>o.user.password=a)},null,8,["class","modelValue"]),D,t(c,{name:"密碼",class:"invalid-feedback"})]),e("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit",disabled:o.isLoading},[o.isLoading?(_(),p("i",I)):w("",!0),x(" 登入 ")],8,N)]),_:1},8,["onSubmit"])])])])}const A=v(E,[["render",P]]);export{A as default};
