import{_ as T,i as m,m as k,a as V,r as a,o as n,c as p,b as u,d as t,t as r,u as C,v as I,F as f,j as g,f as B,e as D,w as _,k as q,p as A,q as E}from"./index-4d0c22ad.js";import{C as v}from"./CartStore-eb94c25b.js";import{S as M,a as R,A as H,P as N,N as U}from"./navigation.min-5fbf70cf.js";import{S as w}from"./sweetalert2-fb1ab54e.js";const{VITE_URL:b,VITE_PATH:y}={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_PATH:"j437437",BASE_URL:"/BirdLab/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},j={data(){return{product:{qty:1},id:"",products:[],recommendProducts:[],isLoading:!1}},components:{Swiper:M,SwiperSlide:R},setup(){const e=m(null),o=m(null);return{onAutoplayTimeLeft:(l,s,h)=>{e.value.style.setProperty("--progress",1-h),o.value.textContent=`${Math.ceil(s/1e3)}s`},progressCircle:e,progressContent:o,modules:[H,N,U]}},methods:{getProduct(){this.isLoading=!0;const e=`${b}v2/api/${y}/product/${this.id}`;this.$http.get(e).then(o=>{this.product=o.data.product,this.product.qty=1,this.getProductList(),this.isLoading=!1}).catch(o=>{w.fire({icon:"error",title:o.response.data.message})})},...k(v,["addToCart"]),getProductList(e=1){const o=`${b}v2/api/${y}/products/?page=${e}`;this.$http.get(o).then(c=>{const{products:l}=c.data;this.products=l,this.recommandProductFilter()}).catch(c=>{w.fire({icon:"error",title:c.response.data.message})})},recommandProductFilter(){const e=this.products.filter(o=>o.id!==this.product.id);this.recommendProducts=e},refreshPage(e){this.id=e,this.getProduct()}},watch:{"$route.params":{handler(){if(this.$route.params.id){const e=this.$route.params.id;this.refreshPage(e)}},deep:!0}},computed:{...V(v,["carts","buttonDisable"])},mounted(){this.id=this.$route.params.id,this.getProduct()}},d=e=>(A("data-v-fd4d2ecd"),e=e(),E(),e),F={class:"container py-5"},O={class:"row justify-content-center"},$={class:"col-lg-9"},z={class:"product row mb-5"},G={class:"product_img col-lg-6",style:{height:"500px"}},J=["src","alt"],K={class:"product_intro d-flex flex-column col-lg-6 p-3"},Q={class:"product_intro_title fs-1 mb-5 fw-bold"},W=["innerHTML"],X={class:"product_intro_price fs-5"},Y={class:"d-flex align-items-center mb-3"},Z=d(()=>t("p",{class:"mb-0 fs-5 text-nowrap flex-grow-1"},"數量：",-1)),tt=["value"],et=["disabled"],st={key:0,class:"fas fa-spinner fa-pulse"},ot={class:"product_content mt-5"},it=d(()=>t("h4",{class:"fw-bold"},"產品介紹",-1)),rt=d(()=>t("hr",null,null,-1)),ct=["innerHTML"],nt={class:"recommended_list row justify-content-center mb-5"},dt={class:"col-lg-9"},lt=d(()=>t("h4",{class:"fw-bold"},"你可能也會喜歡",-1)),at=d(()=>t("hr",null,null,-1)),pt={class:"product_card"},ut={class:"product_card_img swiper_img"},_t=["src"],ht={class:"d-flex align-items-center justify-content-center text-wood fw-bold p-3 bg-light"};function mt(e,o,c,l,s,h){const P=a("Loading-overlay"),L=a("RouterLink"),S=a("swiper-slide"),x=a("swiper");return n(),p("div",F,[u(P,{active:s.isLoading,"z-index":1e3},null,8,["active"]),t("div",O,[t("div",$,[t("div",z,[t("div",G,[t("img",{src:s.product.imageUrl,class:"img_cover",alt:s.product.title},null,8,J)]),t("div",K,[t("h3",Q,r(s.product.title),1),t("div",{class:"product_intro_description fs-5 pb-5 mb-auto",innerHTML:s.product.description},null,8,W),t("p",X," 價格："+r(s.product.price)+"元 / "+r(s.product.unit)+"    (原價："+r(s.product.origin_price)+") ",1),t("div",Y,[Z,C(t("select",{name:"qty",id:"qty",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=i=>s.product.qty=i)},[(n(),p(f,null,g(10,i=>t("option",{value:i,key:i+"1234"},r(i),9,tt)),64))],512),[[I,s.product.qty]])]),t("button",{type:"button",class:"btn btn-lg btn-primary",onClick:o[1]||(o[1]=()=>e.addToCart(s.product.id,s.product.qty)),disabled:e.buttonDisable},[e.buttonDisable?(n(),p("i",st)):B("",!0),D(" 加入購物車 ")],8,et)]),t("div",ot,[it,rt,t("div",{class:"fs-5",innerHTML:s.product.content},null,8,ct)])])])]),t("div",nt,[t("div",dt,[lt,at,u(x,{slidesPerView:2,spaceBetween:10,pagination:{clickable:!0},autoplay:{delay:3e3,disableOnInteraction:!1},breakpoints:{640:{slidesPerView:2,spaceBetween:10},768:{slidesPerView:3,spaceBetween:10},1024:{slidesPerView:4,spaceBetween:20}},modules:l.modules,class:"mySwiper"},{default:_(()=>[(n(!0),p(f,null,g(s.recommendProducts,i=>(n(),q(S,{key:i.id},{default:_(()=>[t("div",pt,[u(L,{to:`/product/${i.id}`,class:"link text-black"},{default:_(()=>[t("div",ut,[t("img",{src:i.imageUrl,class:"img_cover"},null,8,_t)]),t("p",ht,r(i.title),1)]),_:2},1032,["to"])])]),_:2},1024))),128))]),_:1},8,["modules"])])])])}const bt=T(j,[["render",mt],["__scopeId","data-v-fd4d2ecd"]]);export{bt as default};
